<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ROI Calculator | Truv</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Gilroy font via CSS - using a similar geometric sans-serif as fallback -->
    <style>
        @font-face {
            font-family: 'Gilroy';
            src: url('https://fonts.cdnfonts.com/css/gilroy-bold') format('woff2');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'Gilroy';
            src: url('https://fonts.cdnfonts.com/css/gilroy-bold') format('woff2');
            font-weight: 600;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'Gilroy';
            src: url('https://fonts.cdnfonts.com/css/gilroy-bold') format('woff2');
            font-weight: 500;
            font-style: normal;
            font-display: swap;
        }
        @font-face {
            font-family: 'Gilroy';
            src: url('https://fonts.cdnfonts.com/css/gilroy-bold') format('woff2');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }
    </style>
    <link href="https://fonts.cdnfonts.com/css/gilroy-bold" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --truv-blue: #2C64E3;
            --truv-blue-dark: #1e4bb8;
            --truv-blue-light: #e8effc;
            --dark: #171717;
            --gray: #3C3C43;
            --gray-light: #6b6b70;
            --border: #e5e5e5;
            --background: #f8f9fa;
            --white: #ffffff;
            --success: #10b981;
            --success-light: #d1fae5;
            --warning: #f59e0b;
            --warning-light: #fef3c7;
        }

        body {
            font-family: 'Gilroy', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--white);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: var(--white);
            border-bottom: none;
            padding: 24px 40px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: flex-start;
        }

        .logo {
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 28px;
            color: var(--dark);
            text-decoration: none;
            letter-spacing: -0.5px;
        }

        .logo-icon {
            display: none;
        }

        .header-cta {
            display: none;
        }

        .header-cta a {
            color: var(--truv-blue);
            text-decoration: none;
            font-weight: 500;
        }

        .header-cta a:hover {
            text-decoration: underline;
        }

        /* Main Container */
        .container {
            max-width: 680px;
            margin: 0 auto;
            padding: 20px 24px 60px;
        }

        /* Cards */
        .card {
            background: var(--white);
            border-radius: 0;
            box-shadow: none;
            padding: 0;
        }

        .card-header {
            text-align: center;
            margin-bottom: 48px;
        }

        .card-title {
            font-size: 42px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 12px;
            letter-spacing: -0.5px;
            line-height: 1.1;
        }

        .card-subtitle {
            font-size: 18px;
            color: var(--gray);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 15px;
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 16px 20px;
            font-size: 16px;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--white);
            color: var(--dark);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--truv-blue);
            box-shadow: 0 0 0 3px var(--truv-blue-light);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 600px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* Calculator Section */
        .calculator-section {
            margin-bottom: 32px;
        }

        .section-label {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray-light);
            margin-bottom: 16px;
        }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        @media (max-width: 600px) {
            .input-grid {
                grid-template-columns: 1fr;
            }
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-size: 14px;
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .input-large {
            padding: 16px 20px;
            font-size: 18px;
            font-weight: 500;
            border: 2px solid var(--border);
            border-radius: 12px;
            transition: all 0.2s;
        }

        .input-large:focus {
            border-color: var(--truv-blue);
            box-shadow: 0 0 0 4px var(--truv-blue-light);
        }

        /* Cost Input Options */
        .cost-input-section {
            background: transparent;
            border-radius: 0;
            padding: 0;
            margin-bottom: 40px;
        }

        .cost-input-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .cost-input-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
        }

        .cost-input-toggle {
            font-size: 14px;
            color: var(--truv-blue);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .cost-input-toggle:hover {
            text-decoration: underline;
        }

        .cost-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .cost-option {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px 24px;
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
            overflow: hidden;
        }

        .cost-option::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: transparent;
            transition: background 0.15s ease;
        }

        .cost-option:hover {
            border-color: #d0d0d0;
        }

        .cost-option.selected {
            border-color: var(--truv-blue);
            background: var(--white);
        }

        .cost-option.selected::before {
            background: var(--truv-blue);
        }

        .cost-option-radio {
            width: 22px;
            height: 22px;
            border: 2px solid #d0d0d0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.15s ease;
        }

        .cost-option.selected .cost-option-radio {
            border-color: var(--truv-blue);
            background: var(--truv-blue);
        }

        .cost-option.selected .cost-option-radio::after {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--white);
            border-radius: 50%;
        }

        .cost-option-content {
            flex: 1;
        }

        .cost-option-label {
            font-size: 16px;
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 2px;
        }

        .cost-option-desc {
            font-size: 14px;
            color: var(--gray-light);
        }

        .cost-option-input {
            width: 140px;
            padding: 12px 16px;
            font-size: 16px;
            font-weight: 600;
            border: 1px solid var(--border);
            border-radius: 8px;
            text-align: right;
        }

        .cost-option-input:focus {
            outline: none;
            border-color: var(--truv-blue);
            box-shadow: 0 0 0 3px var(--truv-blue-light);
        }

        .cost-option-input:disabled {
            background: var(--background);
            color: var(--gray-light);
        }

        /* Assumptions Badge */
        .assumptions-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 12px;
            background: var(--warning-light);
            color: var(--warning);
            font-size: 12px;
            font-weight: 500;
            border-radius: 6px;
            margin-top: 12px;
        }

        .assumptions-badge.custom {
            background: var(--success-light);
            color: var(--success);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 18px 32px;
            font-size: 16px;
            font-weight: 600;
            border-radius: 32px;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-primary {
            background: var(--truv-blue);
            color: white;
        }

        .btn-primary:hover {
            background: var(--truv-blue-dark);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--truv-blue);
            border: 1px solid var(--truv-blue);
        }

        .btn-secondary:hover {
            background: var(--truv-blue-light);
        }

        .btn-text {
            background: none;
            color: var(--truv-blue);
            padding: 8px 16px;
            font-weight: 500;
        }

        .btn-text:hover {
            text-decoration: underline;
        }

        .btn-link {
            background: none;
            border: none;
            color: var(--truv-blue);
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            padding: 12px;
        }

        .btn-link:hover {
            text-decoration: underline;
        }

        /* Results Section */
        .results-preview {
            background: var(--truv-blue);
            border-radius: 20px;
            padding: 48px 40px;
            text-align: center;
            color: white;
            margin-bottom: 24px;
        }

        .results-preview-label {
            font-size: 15px;
            opacity: 0.9;
            margin-bottom: 12px;
            font-weight: 500;
        }

        .results-preview-value {
            font-size: 64px;
            font-weight: 700;
            margin-bottom: 12px;
            line-height: 1;
            letter-spacing: -2px;
        }

        .results-preview-sublabel {
            font-size: 16px;
            opacity: 0.85;
        }

        .results-secondary {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 32px;
        }

        .result-card {
            background: var(--truv-blue-light);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
        }

        .result-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--truv-blue);
            margin-bottom: 4px;
        }

        .result-label {
            font-size: 13px;
            color: var(--gray);
        }

        /* Current vs Truv comparison mini */
        .cost-comparison-mini {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 24px;
        }

        .cost-box {
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .cost-box.current {
            background: var(--background);
            border: 1px solid var(--border);
        }

        .cost-box.truv {
            background: var(--success-light);
            border: 1px solid var(--success);
        }

        .cost-box-label {
            font-size: 12px;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray-light);
            margin-bottom: 8px;
        }

        .cost-box.truv .cost-box-label {
            color: var(--success);
        }

        .cost-box-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark);
        }

        .cost-box.truv .cost-box-value {
            color: var(--success);
        }

        /* Gate Section */
        .gate-section {
            border-top: 1px solid var(--border);
            padding-top: 32px;
            margin-top: 8px;
        }

        .gate-header {
            text-align: center;
            margin-bottom: 24px;
        }

        .gate-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .gate-subtitle {
            font-size: 14px;
            color: var(--gray);
        }

        .gate-features {
            display: flex;
            justify-content: center;
            gap: 24px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .gate-feature {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--gray);
        }

        .gate-feature svg {
            color: var(--success);
        }

        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.4);
            z-index: 200;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--white);
            border-radius: 20px;
            padding: 48px;
            max-width: 520px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--gray-light);
            padding: 8px;
        }

        .modal-close:hover {
            color: var(--dark);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .modal-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
            letter-spacing: -0.5px;
        }

        .modal-subtitle {
            font-size: 16px;
            color: var(--gray);
        }

        /* Success Modal */
        .success-icon {
            width: 64px;
            height: 64px;
            background: var(--success-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
        }

        .success-icon svg {
            color: var(--success);
        }

        .success-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 24px;
        }

        .success-actions .btn {
            width: 100%;
        }

        .action-card {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            background: var(--background);
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
        }

        .action-card:hover {
            border-color: var(--truv-blue);
            background: var(--truv-blue-light);
        }

        .action-card-icon {
            width: 48px;
            height: 48px;
            background: var(--truv-blue-light);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .action-card-icon svg {
            color: var(--truv-blue);
        }

        .action-card-content {
            flex: 1;
        }

        .action-card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 4px;
        }

        .action-card-desc {
            font-size: 13px;
            color: var(--gray);
        }

        /* Schedule Modal */
        .schedule-modal {
            max-width: 520px;
        }

        .demo-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--warning-light);
            color: var(--warning);
            font-size: 11px;
            font-weight: 600;
            border-radius: 20px;
            margin-bottom: 16px;
        }

        .calendar-mock {
            background: var(--background);
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }

        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }

        .calendar-month {
            font-weight: 600;
            font-size: 16px;
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
        }

        .calendar-nav button {
            width: 32px;
            height: 32px;
            border: 1px solid var(--border);
            background: var(--white);
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            text-align: center;
        }

        .calendar-day-header {
            font-size: 11px;
            font-weight: 600;
            color: var(--gray-light);
            padding: 8px 0;
        }

        .calendar-day {
            padding: 10px;
            font-size: 14px;
            border-radius: 6px;
            cursor: pointer;
        }

        .calendar-day:hover {
            background: var(--truv-blue-light);
        }

        .calendar-day.disabled {
            color: var(--gray-light);
            cursor: default;
        }

        .calendar-day.disabled:hover {
            background: transparent;
        }

        .calendar-day.selected {
            background: var(--truv-blue);
            color: white;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 16px;
        }

        .time-slot {
            padding: 10px;
            text-align: center;
            font-size: 13px;
            border: 1px solid var(--border);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .time-slot:hover {
            border-color: var(--truv-blue);
            background: var(--truv-blue-light);
        }

        .time-slot.selected {
            background: var(--truv-blue);
            color: white;
            border-color: var(--truv-blue);
        }

        /* Detailed Results Section */
        .detailed-results {
            display: none;
        }

        .detailed-results.active {
            display: block;
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }

        @media (max-width: 600px) {
            .results-summary {
                grid-template-columns: 1fr;
            }
        }

        .result-card-small {
            background: var(--truv-blue-light);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .result-card-small.highlight {
            background: var(--truv-blue);
            color: white;
        }

        .result-card-small .result-value {
            font-size: 24px;
            color: inherit;
        }

        .result-card-small.highlight .result-value {
            color: white;
        }

        /* Section Title */
        .section-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Comparison Table */
        .comparison-section {
            margin-top: 32px;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        .comparison-table th {
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--gray-light);
            background: var(--background);
        }

        .comparison-table td {
            font-size: 14px;
        }

        .comparison-table .total-row {
            font-weight: 600;
            background: var(--background);
        }

        .comparison-table .savings-row {
            background: var(--success-light);
            color: var(--success);
            font-weight: 600;
        }

        /* Collapsible Sections */
        .collapsible {
            border: 1px solid var(--border);
            border-radius: 12px;
            margin-top: 24px;
            overflow: hidden;
        }

        .collapsible-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background: var(--background);
            cursor: pointer;
            font-weight: 500;
            transition: background 0.2s;
        }

        .collapsible-header:hover {
            background: var(--border);
        }

        .collapsible-icon {
            transition: transform 0.3s;
        }

        .collapsible.open .collapsible-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            padding: 20px;
            display: none;
        }

        .collapsible.open .collapsible-content {
            display: block;
        }

        /* Quote Section */
        .quote-section {
            margin-top: 32px;
            padding: 24px;
            background: var(--background);
            border-radius: 12px;
            border-left: 4px solid var(--truv-blue);
        }

        .quote-text {
            font-size: 16px;
            font-style: italic;
            color: var(--gray);
            margin-bottom: 12px;
        }

        .quote-author {
            font-size: 14px;
            font-weight: 500;
            color: var(--dark);
        }

        .quote-role {
            font-size: 13px;
            color: var(--gray-light);
        }

        /* CTA Section */
        .cta-section {
            margin-top: 32px;
            text-align: center;
        }

        /* Slider */
        .slider-group {
            margin-bottom: 24px;
        }

        .slider-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .slider-value {
            font-weight: 600;
            color: var(--truv-blue);
        }

        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--border);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--truv-blue);
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }

        /* Funnel Visualization */
        .funnel {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin: 24px 0;
        }

        .funnel-stage {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .funnel-bar {
            height: 40px;
            background: var(--truv-blue);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 12px;
            color: white;
            font-weight: 600;
            font-size: 14px;
            transition: width 0.5s ease;
            min-width: 60px;
        }

        .funnel-label {
            width: 120px;
            font-size: 13px;
            color: var(--gray);
        }

        /* Nav buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        /* Animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-in {
            animation: fadeIn 0.3s ease;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 48px 24px;
            color: var(--gray-light);
            font-size: 13px;
            border-top: 1px solid var(--border);
            margin-top: 60px;
        }

        .partner-logos {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 48px;
            flex-wrap: wrap;
            margin-bottom: 0;
        }

        .partner-logo {
            height: 28px;
            opacity: 0.6;
            filter: grayscale(100%);
            transition: all 0.2s ease;
        }

        .partner-logo:hover {
            opacity: 1;
            filter: grayscale(0%);
        }

        .partner-logo-text {
            font-size: 18px;
            font-weight: 600;
            color: var(--gray-light);
            letter-spacing: -0.3px;
        }

        /* Privacy notice */
        .privacy-notice {
            text-align: center;
            margin-top: 32px;
            font-size: 13px;
            color: var(--gray-light);
        }

        .privacy-notice a {
            color: var(--gray);
            text-decoration: none;
        }

        .privacy-notice a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo" onclick="resetCalculator(); return false;">
                <div class="logo-icon">T</div>
                truv
            </a>
            <div class="header-cta">
                Questions? <a href="#">Talk to Sales</a>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Step 1: Simple Calculator (Ungated) -->
        <div id="simpleCalculator" class="card">
            <div class="card-header">
                <h1 class="card-title">Calculate Your Savings</h1>
                <p class="card-subtitle">See how much you could save with Truv's verification platform</p>
            </div>

            <!-- Basic Inputs -->
            <div class="calculator-section">
                <div class="section-label">Your Volume</div>
                <div class="input-grid">
                    <div class="input-group">
                        <label for="fundedLoans">Annual Funded Loans</label>
                        <input type="number" class="form-input input-large" id="fundedLoans" placeholder="e.g., 2000" min="100" value="2000" oninput="updateSimpleCalculation()">
                    </div>
                    <div class="input-group">
                        <label for="industry">Industry</label>
                        <select class="form-select input-large" id="industry" onchange="updateSimpleCalculation()">
                            <option value="mortgage">Mortgage Lending</option>
                            <option value="credit_union">Credit Union</option>
                            <option value="consumer">Consumer Lending</option>
                            <option value="auto">Auto Lending</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Cost Input Options -->
            <div class="cost-input-section">
                <div class="cost-input-header">
                    <div class="cost-input-title">Your Current Costs</div>
                </div>

                <div class="cost-options">
                    <div class="cost-option selected" onclick="selectCostOption('default')" id="option-default">
                        <div class="cost-option-radio"></div>
                        <div class="cost-option-content">
                            <div class="cost-option-label">Use industry benchmarks</div>
                            <div class="cost-option-desc">$10/VOA, $62/TWN verification</div>
                        </div>
                    </div>

                    <div class="cost-option" onclick="selectCostOption('perLoan')" id="option-perLoan">
                        <div class="cost-option-radio"></div>
                        <div class="cost-option-content">
                            <div class="cost-option-label">I know my cost per funded loan</div>
                            <div class="cost-option-desc">Total verification cost per loan</div>
                        </div>
                        <input type="text" class="cost-option-input" id="input-perLoan" placeholder="$85" disabled oninput="updateSimpleCalculation()">
                    </div>

                    <div class="cost-option" onclick="selectCostOption('totalSpend')" id="option-totalSpend">
                        <div class="cost-option-radio"></div>
                        <div class="cost-option-content">
                            <div class="cost-option-label">I know my total annual spend</div>
                            <div class="cost-option-desc">Total verification budget per year</div>
                        </div>
                        <input type="text" class="cost-option-input" id="input-totalSpend" placeholder="$180,000" disabled oninput="updateSimpleCalculation()">
                    </div>

                    <div class="cost-option" onclick="selectCostOption('perVerification')" id="option-perVerification">
                        <div class="cost-option-radio"></div>
                        <div class="cost-option-content">
                            <div class="cost-option-label">I know my cost per verification</div>
                            <div class="cost-option-desc">What you pay TWN or similar</div>
                        </div>
                        <input type="text" class="cost-option-input" id="input-perVerification" placeholder="$62" disabled oninput="updateSimpleCalculation()">
                    </div>
                </div>

                <div class="assumptions-badge" id="assumptionsBadge">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    Using industry benchmark costs
                </div>
            </div>

            <!-- Current vs Future Comparison -->
            <div class="cost-comparison-mini">
                <div class="cost-box current">
                    <div class="cost-box-label">Your Current Cost</div>
                    <div class="cost-box-value" id="previewCurrentCost">$180,374</div>
                </div>
                <div class="cost-box truv">
                    <div class="cost-box-label">With Truv</div>
                    <div class="cost-box-value" id="previewTruvCost">$88,273</div>
                </div>
            </div>

            <!-- Big Savings Number -->
            <div class="results-preview animate-in">
                <div class="results-preview-label">Estimated Annual Savings</div>
                <div class="results-preview-value" id="previewSavings">$92,101</div>
                <div class="results-preview-sublabel">based on <span id="previewLoans">2,000</span> funded loans per year</div>
            </div>

            <div class="results-secondary">
                <div class="result-card">
                    <div class="result-value" id="previewPerLoan">$46</div>
                    <div class="result-label">Savings Per Funded Loan</div>
                </div>
                <div class="result-card">
                    <div class="result-value" id="previewPercent">51%</div>
                    <div class="result-label">Cost Reduction</div>
                </div>
            </div>

            <!-- Gate for Full Breakdown -->
            <div class="gate-section">
                <div class="gate-header">
                    <h2 class="gate-title">Want the full breakdown?</h2>
                    <p class="gate-subtitle">See exactly where your savings come from</p>
                </div>

                <div class="gate-features">
                    <div class="gate-feature">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                        Line-by-line cost breakdown
                    </div>
                    <div class="gate-feature">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                        Funnel visualization
                    </div>
                    <div class="gate-feature">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                            <polyline points="22 4 12 14.01 9 11.01"/>
                        </svg>
                        Customizable assumptions
                    </div>
                </div>

                <button class="btn btn-primary" style="width: 100%;" onclick="openGateModal()">
                    Unlock Full Report
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 2: Detailed Breakdown (After Gate) -->
        <div id="detailedResults" class="detailed-results">
            <div class="card">
                <div class="nav-buttons">
                    <button class="btn btn-text" onclick="resetCalculator()">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        Start Over
                    </button>
                    <span style="font-size: 14px; color: var(--gray);">Welcome, <span id="userName">there</span></span>
                </div>

                <div class="card-header" style="margin-bottom: 24px;">
                    <h1 class="card-title">Your Detailed ROI Breakdown</h1>
                    <p class="card-subtitle">Adjust inputs below to refine your estimate</p>
                </div>

                <!-- Summary Cards -->
                <div class="results-summary">
                    <div class="result-card-small highlight">
                        <div class="result-value" id="detailSavings">$92,101</div>
                        <div class="result-label">Annual Savings</div>
                    </div>
                    <div class="result-card-small">
                        <div class="result-value" id="detailPerLoan">$46</div>
                        <div class="result-label">Per Funded Loan</div>
                    </div>
                    <div class="result-card-small">
                        <div class="result-value" id="detailPercent">51%</div>
                        <div class="result-label">Cost Reduction</div>
                    </div>
                </div>

                <!-- Funnel Visualization -->
                <div class="section-title">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--truv-blue)" stroke-width="2">
                        <path d="M22 3H2l8 9.46V19l4 2v-8.54L22 3z"/>
                    </svg>
                    Verification Funnel
                </div>
                <div class="funnel">
                    <div class="funnel-stage">
                        <span class="funnel-label">Apps Started</span>
                        <div class="funnel-bar" id="funnelApps" style="width: 100%;">6,667</div>
                    </div>
                    <div class="funnel-stage">
                        <span class="funnel-label">Apps Submitted</span>
                        <div class="funnel-bar" id="funnelSubmitted" style="width: 50%; background: #5b8def;">3,333</div>
                    </div>
                    <div class="funnel-stage">
                        <span class="funnel-label">Funded</span>
                        <div class="funnel-bar" id="funnelFunded" style="width: 30%; background: #10b981;">2,000</div>
                    </div>
                </div>

                <!-- Comparison Table -->
                <div class="comparison-section">
                    <div class="section-title">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--truv-blue)" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2"/>
                            <path d="M3 9h18M9 21V9"/>
                        </svg>
                        Cost Comparison
                    </div>
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Current State</th>
                                <th>With Truv</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>VOA Checks</td>
                                <td id="currentVOA">5,000 × $10 = $50,000</td>
                                <td id="truvVOA">6,000 × $6 = $36,000</td>
                            </tr>
                            <tr>
                                <td>VOIE Checks</td>
                                <td id="currentVOIE">—</td>
                                <td id="truvVOIE">2,800 × $10 = $28,000</td>
                            </tr>
                            <tr>
                                <td>TWN Verifications</td>
                                <td id="currentTWN">3,024 × $62 = $187,488</td>
                                <td id="truvTWN">1,382 × $62 = $85,684</td>
                            </tr>
                            <tr class="total-row">
                                <td>Total Annual Cost</td>
                                <td id="currentTotal">$180,374</td>
                                <td id="truvTotal">$88,273</td>
                            </tr>
                            <tr class="savings-row">
                                <td colspan="2">Your Annual Savings</td>
                                <td id="tableSavings">$92,101</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Refinement Panels -->
                <div class="collapsible" id="volumePanel">
                    <div class="collapsible-header" onclick="togglePanel('volumePanel')">
                        <span>Volume & Mix</span>
                        <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="collapsible-content">
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">Funded Loans (Annual)</label>
                                <span class="slider-value" id="loansValue">2,000</span>
                            </div>
                            <input type="range" class="slider" id="loansSlider" min="500" max="50000" value="2000" oninput="updateDetailedCalculations()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">Retail Channel %</label>
                                <span class="slider-value" id="retailValue">70%</span>
                            </div>
                            <input type="range" class="slider" id="retailSlider" min="0" max="100" value="70" oninput="updateDetailedCalculations()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">Borrowers per Application</label>
                                <span class="slider-value" id="borrowersValue">1.5</span>
                            </div>
                            <input type="range" class="slider" id="borrowersSlider" min="1" max="2" step="0.1" value="1.5" oninput="updateDetailedCalculations()">
                        </div>
                    </div>
                </div>

                <div class="collapsible" id="funnelPanel">
                    <div class="collapsible-header" onclick="togglePanel('funnelPanel')">
                        <span>Funnel Efficiency</span>
                        <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="collapsible-content">
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">End-to-End Conversion Rate</label>
                                <span class="slider-value" id="e2eValue">30%</span>
                            </div>
                            <input type="range" class="slider" id="e2eSlider" min="10" max="60" value="30" oninput="updateDetailedCalculations()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">Pull-Through Rate</label>
                                <span class="slider-value" id="pullThroughValue">60%</span>
                            </div>
                            <input type="range" class="slider" id="pullThroughSlider" min="30" max="90" value="60" oninput="updateDetailedCalculations()">
                        </div>
                    </div>
                </div>

                <div class="collapsible" id="incomePanel">
                    <div class="collapsible-header" onclick="togglePanel('incomePanel')">
                        <span>Income Mix</span>
                        <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="collapsible-content">
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">W-2 Borrower Rate</label>
                                <span class="slider-value" id="w2Value">80%</span>
                            </div>
                            <input type="range" class="slider" id="w2Slider" min="50" max="95" value="80" oninput="updateDetailedCalculations()">
                        </div>
                    </div>
                </div>

                <div class="collapsible" id="costPanel">
                    <div class="collapsible-header" onclick="togglePanel('costPanel')">
                        <span>Cost Assumptions</span>
                        <svg class="collapsible-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 9l6 6 6-6"/>
                        </svg>
                    </div>
                    <div class="collapsible-content">
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">Current VOA Cost</label>
                                <span class="slider-value" id="voaCostValue">$10</span>
                            </div>
                            <input type="range" class="slider" id="voaCostSlider" min="5" max="25" value="10" oninput="updateDetailedCalculations()">
                        </div>
                        <div class="slider-group">
                            <div class="slider-header">
                                <label class="form-label">Current TWN/VOIE Cost</label>
                                <span class="slider-value" id="twnCostValue">$62</span>
                            </div>
                            <input type="range" class="slider" id="twnCostSlider" min="40" max="100" value="62" oninput="updateDetailedCalculations()">
                        </div>
                    </div>
                </div>

                <!-- Quote -->
                <div class="quote-section" id="quoteSection">
                    <p class="quote-text">"Borrowers try Truv first because it has proven most reliable."</p>
                    <p class="quote-author">Austin Coleman</p>
                    <p class="quote-role">SVP, America First Credit Union</p>
                </div>

                <!-- CTA -->
                <div class="cta-section">
                    <button class="btn btn-primary" onclick="alert('Demo: This would open a calendar booking link')">
                        Talk to Sales
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Lead Capture Modal -->
    <div class="modal-overlay" id="gateModal">
        <div class="modal">
            <button class="modal-close" onclick="closeGateModal()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>

            <div class="modal-header">
                <h2 class="modal-title">Unlock Your Full Report</h2>
                <p class="modal-subtitle">Get the detailed breakdown plus a personalized savings analysis</p>
            </div>

            <form id="leadForm" onsubmit="submitLeadForm(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="name">Full Name</label>
                        <input type="text" class="form-input" id="name" placeholder="John Smith" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="title">Job Title</label>
                        <input type="text" class="form-input" id="title" placeholder="VP of Operations" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="company">Company</label>
                        <input type="text" class="form-input" id="company" placeholder="Acme Lending" required>
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="email">Work Email</label>
                        <input type="email" class="form-input" id="email" placeholder="john@acmelending.com" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="phone">Phone</label>
                    <input type="tel" class="form-input" id="phone" placeholder="(555) 123-4567" required>
                </div>

                <div style="border-top: 1px solid var(--border); margin: 20px 0; padding-top: 20px;">
                    <p style="font-size: 13px; color: var(--gray); margin-bottom: 12px;">Optional: Help us personalize your report</p>

                    <div class="form-row">
                        <div class="form-group" style="margin-bottom: 12px;">
                            <label class="form-label" for="los">Loan Origination System (LOS)</label>
                            <select class="form-select" id="los">
                                <option value="">Select your LOS</option>
                                <option value="encompass">Encompass (ICE)</option>
                                <option value="bytepro">Byte Pro</option>
                                <option value="meridianlink">MeridianLink</option>
                                <option value="blackknight">Black Knight Empower</option>
                                <option value="blueskyloan">Blue Sky Loan</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div class="form-group" style="margin-bottom: 12px;">
                            <label class="form-label" for="pos">Point of Sale (POS)</label>
                            <select class="form-select" id="pos">
                                <option value="">Select your POS</option>
                                <option value="blend">Blend</option>
                                <option value="encompassconsumerconnect">Encompass Consumer Connect</option>
                                <option value="mortgage-flex">MortgageFlex</option>
                                <option value="floify">Floify</option>
                                <option value="simplenexus">SimpleNexus</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%; margin-top: 8px;">
                    Get My Full Report
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </form>
        </div>
    </div>

    <!-- Success Modal (after form submission) -->
    <div class="modal-overlay" id="successModal">
        <div class="modal">
            <button class="modal-close" onclick="closeSuccessModal()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>

            <div class="success-icon">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
            </div>

            <div class="modal-header">
                <h2 class="modal-title">Your Report is Ready!</h2>
                <p class="modal-subtitle">Thanks, <span id="successName">there</span>. Here's what you can do next:</p>
            </div>

            <!-- Integration Status (shown if LOS/POS selected) -->
            <div id="integrationStatus" style="display: none; margin-bottom: 20px; padding: 16px; background: var(--success-light); border-radius: 10px; border: 1px solid var(--success);">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--success)" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                    <span style="font-weight: 600; color: var(--success);">Great news!</span>
                </div>
                <p id="integrationMessage" style="font-size: 14px; color: var(--gray); margin: 0;">Truv has native integrations with your systems.</p>
            </div>

            <div class="success-actions">
                <div class="action-card" onclick="downloadPDF()">
                    <div class="action-card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7 10 12 15 17 10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </div>
                    <div class="action-card-content">
                        <div class="action-card-title">Download PDF Report</div>
                        <div class="action-card-desc">Save your personalized ROI analysis</div>
                    </div>
                </div>

                <div class="action-card" onclick="openScheduleModal()">
                    <div class="action-card-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                            <line x1="16" y1="2" x2="16" y2="6"/>
                            <line x1="8" y1="2" x2="8" y2="6"/>
                            <line x1="3" y1="10" x2="21" y2="10"/>
                        </svg>
                    </div>
                    <div class="action-card-content">
                        <div class="action-card-title">Schedule a Call with Sales</div>
                        <div class="action-card-desc">Get a personalized walkthrough of your savings</div>
                    </div>
                </div>

                <button class="btn btn-secondary" onclick="closeSuccessModal(); showDetailedResults();">
                    View Detailed Breakdown
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 12h14M12 5l7 7-7 7"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Schedule Call Modal (Mock) -->
    <div class="modal-overlay" id="scheduleModal">
        <div class="modal schedule-modal">
            <button class="modal-close" onclick="closeScheduleModal()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M18 6L6 18M6 6l12 12"/>
                </svg>
            </button>

            <div class="demo-badge">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M12 16v-4M12 8h.01"/>
                </svg>
                DEMO MODE — This would link to your real scheduling form
            </div>

            <div class="modal-header" style="margin-bottom: 16px;">
                <h2 class="modal-title">Schedule a Call</h2>
                <p class="modal-subtitle">Pick a time that works for you</p>
            </div>

            <div class="calendar-mock">
                <div class="calendar-header">
                    <div class="calendar-month">January 2025</div>
                    <div class="calendar-nav">
                        <button type="button">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M15 18l-6-6 6-6"/>
                            </svg>
                        </button>
                        <button type="button">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M9 18l6-6-6-6"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="calendar-grid">
                    <div class="calendar-day-header">Sun</div>
                    <div class="calendar-day-header">Mon</div>
                    <div class="calendar-day-header">Tue</div>
                    <div class="calendar-day-header">Wed</div>
                    <div class="calendar-day-header">Thu</div>
                    <div class="calendar-day-header">Fri</div>
                    <div class="calendar-day-header">Sat</div>
                    <div class="calendar-day disabled"></div>
                    <div class="calendar-day disabled"></div>
                    <div class="calendar-day disabled"></div>
                    <div class="calendar-day disabled">1</div>
                    <div class="calendar-day disabled">2</div>
                    <div class="calendar-day disabled">3</div>
                    <div class="calendar-day disabled">4</div>
                    <div class="calendar-day disabled">5</div>
                    <div class="calendar-day">6</div>
                    <div class="calendar-day">7</div>
                    <div class="calendar-day selected">8</div>
                    <div class="calendar-day">9</div>
                    <div class="calendar-day">10</div>
                    <div class="calendar-day">11</div>
                    <div class="calendar-day">12</div>
                    <div class="calendar-day">13</div>
                    <div class="calendar-day">14</div>
                    <div class="calendar-day">15</div>
                    <div class="calendar-day">16</div>
                    <div class="calendar-day">17</div>
                    <div class="calendar-day">18</div>
                </div>
                <div class="time-slots">
                    <div class="time-slot">9:00 AM</div>
                    <div class="time-slot selected">10:30 AM</div>
                    <div class="time-slot">1:00 PM</div>
                    <div class="time-slot">2:30 PM</div>
                    <div class="time-slot">3:30 PM</div>
                    <div class="time-slot">4:30 PM</div>
                </div>
            </div>

            <button class="btn btn-primary" style="width: 100%;" onclick="confirmSchedule()">
                Confirm: Wed, Jan 8 at 10:30 AM
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                </svg>
            </button>

            <p style="text-align: center; margin-top: 16px; font-size: 13px; color: var(--gray-light);">
                In production, this would redirect to:<br>
                <strong style="color: var(--truv-blue);">truv.com/demo</strong> or your Calendly/HubSpot booking link
            </p>
        </div>
    </div>

    <footer class="footer">
        <div class="partner-logos">
            <span class="partner-logo-text">accurate.</span>
            <span class="partner-logo-text" style="color: #2d6a3f;">Associated Bank</span>
            <span class="partner-logo-text" style="color: #b71c1c;">AFN</span>
            <span class="partner-logo-text">Happy Money</span>
            <span class="partner-logo-text" style="color: #1976d2;">Compass Mortgage</span>
        </div>
        <div class="privacy-notice">
            By clicking "Continue" you agree to Truv's <a href="#">Privacy Notice</a>.
        </div>
    </footer>

    <script>
        // State
        let leadData = {};
        let selectedCostOption = 'default';

        // Industry quotes
        const quotes = {
            mortgage: {
                text: "Truv provides the most seamless borrower experience. We've seen a 65%+ conversion rate and significant cost savings.",
                author: "CrossCountry Mortgage",
                role: "Top 5 Retail Lender"
            },
            credit_union: {
                text: "Borrowers try Truv first because it has proven most reliable.",
                author: "Austin Coleman",
                role: "SVP, America First Credit Union"
            },
            consumer: {
                text: "Truv's real-time verification transformed our approval process. We went from days to seconds.",
                author: "HFS Financial",
                role: "Consumer Lending Leader"
            },
            auto: {
                text: "Same-day funding is now our standard thanks to instant income verification.",
                author: "TurboPass",
                role: "Auto Lending Partner"
            }
        };

        // Default costs
        const defaults = {
            voaCost: 10,
            twnCost: 62,
            truvVoaCost: 6,
            truvVoieCost: 10
        };

        // Format currency
        function formatCurrency(num) {
            return '$' + Math.round(num).toLocaleString();
        }

        // Format number
        function formatNumber(num) {
            return Math.round(num).toLocaleString();
        }

        // Parse currency input
        function parseCurrency(str) {
            if (!str) return 0;
            return parseFloat(str.replace(/[$,]/g, '')) || 0;
        }

        // Select cost option
        function selectCostOption(option) {
            selectedCostOption = option;

            // Update UI
            document.querySelectorAll('.cost-option').forEach(el => el.classList.remove('selected'));
            document.getElementById('option-' + option).classList.add('selected');

            // Enable/disable inputs
            document.getElementById('input-perLoan').disabled = option !== 'perLoan';
            document.getElementById('input-totalSpend').disabled = option !== 'totalSpend';
            document.getElementById('input-perVerification').disabled = option !== 'perVerification';

            // Update assumptions badge
            const badge = document.getElementById('assumptionsBadge');
            if (option === 'default') {
                badge.className = 'assumptions-badge';
                badge.innerHTML = `
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    Using industry benchmark costs
                `;
            } else {
                badge.className = 'assumptions-badge custom';
                badge.innerHTML = `
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                        <polyline points="22 4 12 14.01 9 11.01"/>
                    </svg>
                    Using your custom costs
                `;
            }

            updateSimpleCalculation();
        }

        // Calculate current costs based on user input
        function getCurrentCosts(fundedLoans) {
            // Derive verification volume from funded loans (using defaults)
            const e2eCR = 0.3;
            const pullThrough = 0.6;
            const retailPct = 0.7;
            const borrowersPerApp = 1.5;
            const w2Rate = 0.8;

            const appsStarted = fundedLoans / e2eCR;
            const appsSubmitted = fundedLoans / pullThrough;
            const appSubmitCR = e2eCR / pullThrough;

            const voasDuringApp = appsStarted * borrowersPerApp * retailPct;
            const voiesDuringApp = appsStarted * w2Rate * borrowersPerApp * retailPct;
            const w2AppsSubmitted = appsSubmitted * w2Rate;
            const voiesAfterSubmit = w2AppsSubmitted * borrowersPerApp * retailPct;

            // Current state conversion rates
            const voaConvCurrent = 0.50;
            const ssvConvCurrent = 0.20;
            const twnConvCurrent = 0.60;

            const currentVOAs = voasDuringApp * voaConvCurrent;
            const currentSSV = currentVOAs * ssvConvCurrent;
            const voiesNeededAfterSSV = voiesAfterSubmit - (currentSSV * appSubmitCR);
            const currentTWNInitial = voiesNeededAfterSSV * twnConvCurrent;
            const currentTWNReverify = currentTWNInitial * pullThrough;
            const totalTWN = currentTWNInitial + currentTWNReverify;

            // Get costs based on selected option
            let voaCost = defaults.voaCost;
            let twnCost = defaults.twnCost;

            if (selectedCostOption === 'perLoan') {
                const costPerLoan = parseCurrency(document.getElementById('input-perLoan').value);
                if (costPerLoan > 0) {
                    // Derive TWN cost from per-loan cost
                    // Assume VOA cost stays at default, derive TWN from the difference
                    const impliedTotalCost = costPerLoan * fundedLoans;
                    const voaCostTotal = currentVOAs * defaults.voaCost;
                    const impliedTwnTotal = impliedTotalCost - voaCostTotal;
                    if (totalTWN > 0) {
                        twnCost = Math.max(40, impliedTwnTotal / totalTWN);
                    }
                }
            } else if (selectedCostOption === 'totalSpend') {
                const totalSpend = parseCurrency(document.getElementById('input-totalSpend').value);
                if (totalSpend > 0) {
                    // Derive TWN cost from total spend
                    const voaCostTotal = currentVOAs * defaults.voaCost;
                    const impliedTwnTotal = totalSpend - voaCostTotal;
                    if (totalTWN > 0) {
                        twnCost = Math.max(40, impliedTwnTotal / totalTWN);
                    }
                }
            } else if (selectedCostOption === 'perVerification') {
                const perVerif = parseCurrency(document.getElementById('input-perVerification').value);
                if (perVerif > 0) {
                    twnCost = perVerif;
                }
            }

            return { voaCost, twnCost, currentVOAs, totalTWN };
        }

        // Calculate savings (shared logic)
        function calculateSavings(fundedLoans, voaCostOverride = null, twnCostOverride = null, retailPct = 0.7, borrowersPerApp = 1.5, e2eCR = 0.3, pullThrough = 0.6, w2Rate = 0.8) {
            // Layer 1: Funnel Reconstruction
            const appsStarted = Math.round(fundedLoans / e2eCR);
            const appsSubmitted = Math.round(fundedLoans / pullThrough);
            const appSubmitCR = e2eCR / pullThrough;
            const w2AppsSubmitted = appsSubmitted * w2Rate;
            const voasDuringApp = appsStarted * borrowersPerApp * retailPct;
            const voiesDuringApp = appsStarted * w2Rate * borrowersPerApp * retailPct;
            const voiesAfterSubmit = w2AppsSubmitted * borrowersPerApp * retailPct;

            // Get costs
            const voaCost = voaCostOverride !== null ? voaCostOverride : defaults.voaCost;
            const twnCost = twnCostOverride !== null ? twnCostOverride : defaults.twnCost;

            // Layer 2: Current State
            const voaConvCurrent = 0.50;
            const ssvConvCurrent = 0.20;
            const twnConvCurrent = 0.60;

            const currentVOAs = voasDuringApp * voaConvCurrent;
            const currentSSV = currentVOAs * ssvConvCurrent;
            const voiesNeededAfterSSV = voiesAfterSubmit - (currentSSV * appSubmitCR);
            const currentTWNInitial = voiesNeededAfterSSV * twnConvCurrent;
            const currentTWNReverify = currentTWNInitial * pullThrough;

            const currentVOACost = currentVOAs * voaCost;
            const currentTWNCost = (currentTWNInitial + currentTWNReverify) * twnCost;
            const totalCurrentCost = currentVOACost + currentTWNCost;

            // Layer 3: Future State with Truv
            const voaConvTruv = 0.60;
            const ssvConvTruv = 0.24;
            const voieConvTruv = 0.42;
            const twnConvReduced = 0.36;

            const truvVOAs = voasDuringApp * voaConvTruv;
            const truvSSV = truvVOAs * ssvConvTruv;
            const truvVOIEs = voiesDuringApp * voieConvTruv;
            const voiesStillNeeded = voiesAfterSubmit - ((truvSSV + truvVOIEs) * appSubmitCR);
            const truvTWNInitial = Math.max(0, voiesStillNeeded * twnConvReduced);
            const truvTWNReverify = truvTWNInitial * pullThrough;

            const truvVOACost = truvVOAs * defaults.truvVoaCost;
            const truvVOIECost = truvVOIEs * defaults.truvVoieCost;
            const truvTWNCost = (truvTWNInitial + truvTWNReverify) * twnCost;
            const totalTruvCost = truvVOACost + truvVOIECost + truvTWNCost;

            // Layer 4: Savings
            const annualSavings = totalCurrentCost - totalTruvCost;
            const savingsPercent = totalCurrentCost > 0 ? (annualSavings / totalCurrentCost) * 100 : 0;
            const savingsPerLoan = fundedLoans > 0 ? annualSavings / fundedLoans : 0;

            return {
                annualSavings,
                savingsPercent,
                savingsPerLoan,
                appsStarted,
                appsSubmitted,
                fundedLoans,
                currentVOAs,
                currentVOACost,
                voaCost,
                twnCost,
                currentTWNTotal: currentTWNInitial + currentTWNReverify,
                currentTWNCost,
                totalCurrentCost,
                truvVOAs,
                truvVOACost,
                truvVOIEs,
                truvVOIECost,
                truvTWNTotal: truvTWNInitial + truvTWNReverify,
                truvTWNCost,
                totalTruvCost
            };
        }

        // Update simple calculator (ungated)
        function updateSimpleCalculation() {
            const fundedLoans = parseInt(document.getElementById('fundedLoans').value) || 2000;

            // Get current costs based on user selection
            const costs = getCurrentCosts(fundedLoans);
            const results = calculateSavings(fundedLoans, costs.voaCost, costs.twnCost);

            // Update displays
            document.getElementById('previewCurrentCost').textContent = formatCurrency(results.totalCurrentCost);
            document.getElementById('previewTruvCost').textContent = formatCurrency(results.totalTruvCost);
            document.getElementById('previewSavings').textContent = formatCurrency(results.annualSavings);
            document.getElementById('previewLoans').textContent = formatNumber(fundedLoans);
            document.getElementById('previewPerLoan').textContent = formatCurrency(results.savingsPerLoan);
            document.getElementById('previewPercent').textContent = Math.round(results.savingsPercent) + '%';
        }

        // Update detailed calculations
        function updateDetailedCalculations() {
            const fundedLoans = parseInt(document.getElementById('loansSlider').value);
            const retailPct = parseInt(document.getElementById('retailSlider').value) / 100;
            const borrowersPerApp = parseFloat(document.getElementById('borrowersSlider').value);
            const e2eCR = parseInt(document.getElementById('e2eSlider').value) / 100;
            const pullThrough = parseInt(document.getElementById('pullThroughSlider').value) / 100;
            const w2Rate = parseInt(document.getElementById('w2Slider').value) / 100;
            const voaCost = parseInt(document.getElementById('voaCostSlider').value);
            const twnCost = parseInt(document.getElementById('twnCostSlider').value);

            // Update slider displays
            document.getElementById('loansValue').textContent = formatNumber(fundedLoans);
            document.getElementById('retailValue').textContent = Math.round(retailPct * 100) + '%';
            document.getElementById('borrowersValue').textContent = borrowersPerApp.toFixed(1);
            document.getElementById('e2eValue').textContent = Math.round(e2eCR * 100) + '%';
            document.getElementById('pullThroughValue').textContent = Math.round(pullThrough * 100) + '%';
            document.getElementById('w2Value').textContent = Math.round(w2Rate * 100) + '%';
            document.getElementById('voaCostValue').textContent = formatCurrency(voaCost);
            document.getElementById('twnCostValue').textContent = formatCurrency(twnCost);

            const results = calculateSavings(fundedLoans, voaCost, twnCost, retailPct, borrowersPerApp, e2eCR, pullThrough, w2Rate);

            // Update summary
            document.getElementById('detailSavings').textContent = formatCurrency(results.annualSavings);
            document.getElementById('detailPerLoan').textContent = formatCurrency(results.savingsPerLoan);
            document.getElementById('detailPercent').textContent = Math.round(results.savingsPercent) + '%';

            // Update funnel
            const maxWidth = 100;
            document.getElementById('funnelApps').style.width = maxWidth + '%';
            document.getElementById('funnelApps').textContent = formatNumber(results.appsStarted);
            document.getElementById('funnelSubmitted').style.width = Math.max(15, (results.appsSubmitted / results.appsStarted * maxWidth)) + '%';
            document.getElementById('funnelSubmitted').textContent = formatNumber(results.appsSubmitted);
            document.getElementById('funnelFunded').style.width = Math.max(10, (fundedLoans / results.appsStarted * maxWidth)) + '%';
            document.getElementById('funnelFunded').textContent = formatNumber(fundedLoans);

            // Update comparison table
            document.getElementById('currentVOA').textContent = `${formatNumber(results.currentVOAs)} × ${formatCurrency(voaCost)} = ${formatCurrency(results.currentVOACost)}`;
            document.getElementById('truvVOA').textContent = `${formatNumber(results.truvVOAs)} × $6 = ${formatCurrency(results.truvVOACost)}`;
            document.getElementById('currentVOIE').textContent = '—';
            document.getElementById('truvVOIE').textContent = `${formatNumber(results.truvVOIEs)} × $10 = ${formatCurrency(results.truvVOIECost)}`;
            document.getElementById('currentTWN').textContent = `${formatNumber(results.currentTWNTotal)} × ${formatCurrency(twnCost)} = ${formatCurrency(results.currentTWNCost)}`;
            document.getElementById('truvTWN').textContent = `${formatNumber(results.truvTWNTotal)} × ${formatCurrency(twnCost)} = ${formatCurrency(results.truvTWNCost)}`;
            document.getElementById('currentTotal').textContent = formatCurrency(results.totalCurrentCost);
            document.getElementById('truvTotal').textContent = formatCurrency(results.totalTruvCost);
            document.getElementById('tableSavings').textContent = formatCurrency(results.annualSavings);
        }

        // Store calculated results for PDF
        let calculatedResults = {};

        // Modal functions
        function openGateModal() {
            document.getElementById('gateModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeGateModal() {
            document.getElementById('gateModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function openSuccessModal() {
            document.getElementById('successModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function openScheduleModal() {
            closeSuccessModal();
            document.getElementById('scheduleModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeScheduleModal() {
            document.getElementById('scheduleModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function confirmSchedule() {
            alert('Demo: Meeting scheduled!\n\nIn production, this would:\n1. Create a calendar event\n2. Send confirmation emails\n3. Redirect to a thank you page');
            closeScheduleModal();
            showDetailedResults();
        }

        function showDetailedResults() {
            document.getElementById('simpleCalculator').style.display = 'none';
            document.getElementById('detailedResults').classList.add('active');
            updateDetailedCalculations();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Integration partners (Truv native integrations)
        const nativeIntegrations = {
            los: ['encompass', 'bytepro', 'meridianlink'],
            pos: ['blend', 'encompassconsumerconnect', 'floify']
        };

        // Check if system has native integration
        function checkIntegrations(los, pos) {
            const losIntegrated = los && nativeIntegrations.los.includes(los);
            const posIntegrated = pos && nativeIntegrations.pos.includes(pos);

            const losName = los ? document.querySelector(`#los option[value="${los}"]`)?.textContent : '';
            const posName = pos ? document.querySelector(`#pos option[value="${pos}"]`)?.textContent : '';

            return {
                hasIntegration: losIntegrated || posIntegrated,
                losIntegrated,
                posIntegrated,
                losName,
                posName
            };
        }

        // Submit lead form
        function submitLeadForm(e) {
            e.preventDefault();

            const fundedLoans = parseInt(document.getElementById('fundedLoans').value) || 2000;
            const costs = getCurrentCosts(fundedLoans);

            const los = document.getElementById('los').value;
            const pos = document.getElementById('pos').value;

            leadData = {
                name: document.getElementById('name').value,
                title: document.getElementById('title').value,
                company: document.getElementById('company').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                industry: document.getElementById('industry').value,
                los: los,
                pos: pos,
                fundedLoans: fundedLoans,
                costOption: selectedCostOption,
                derivedTwnCost: costs.twnCost
            };

            // Calculate results for PDF
            calculatedResults = calculateSavings(fundedLoans, costs.voaCost, costs.twnCost);

            // Set sliders to match inputs
            document.getElementById('loansSlider').value = leadData.fundedLoans;
            document.getElementById('twnCostSlider').value = Math.round(costs.twnCost);

            // Update quote
            updateQuote(leadData.industry);

            // Show user name in modals and detailed view
            document.getElementById('userName').textContent = leadData.name.split(' ')[0];
            document.getElementById('successName').textContent = leadData.name.split(' ')[0];

            // Check and display integration status
            const integration = checkIntegrations(los, pos);
            const statusEl = document.getElementById('integrationStatus');
            const messageEl = document.getElementById('integrationMessage');

            if (integration.hasIntegration) {
                let message = 'Truv has native integrations with ';
                const systems = [];
                if (integration.losIntegrated) systems.push(integration.losName);
                if (integration.posIntegrated) systems.push(integration.posName);
                message += systems.join(' and ') + '. Implementation is fast and seamless!';
                messageEl.textContent = message;
                statusEl.style.display = 'block';
            } else {
                statusEl.style.display = 'none';
            }

            // Close gate modal and show success modal
            closeGateModal();
            openSuccessModal();
        }

        // Generate and download PDF
        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            const pageWidth = doc.internal.pageSize.getWidth();
            let y = 20;

            // Helper function
            const addText = (text, x, size = 12, style = 'normal', color = [0, 0, 0]) => {
                doc.setFontSize(size);
                doc.setFont('helvetica', style);
                doc.setTextColor(...color);
                doc.text(text, x, y);
            };

            // Header
            doc.setFillColor(44, 100, 227);
            doc.rect(0, 0, pageWidth, 40, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.setFont('helvetica', 'bold');
            doc.text('truv', 20, 25);

            doc.setFontSize(12);
            doc.setFont('helvetica', 'normal');
            doc.text('ROI Analysis Report', pageWidth - 20, 25, { align: 'right' });

            y = 55;

            // Company info
            addText('Prepared for:', 20, 10, 'normal', [107, 107, 112]);
            y += 6;
            addText(leadData.company, 20, 16, 'bold', [23, 23, 23]);
            y += 8;
            addText(`${leadData.name} | ${leadData.email}`, 20, 10, 'normal', [107, 107, 112]);
            y += 5;
            addText(`Generated: ${new Date().toLocaleDateString()}`, 20, 10, 'normal', [107, 107, 112]);

            y += 20;

            // Main savings highlight
            doc.setFillColor(232, 239, 252);
            doc.roundedRect(20, y, pageWidth - 40, 45, 3, 3, 'F');

            y += 15;
            addText('Estimated Annual Savings', pageWidth / 2, 12, 'normal', [44, 100, 227]);
            doc.text('Estimated Annual Savings', pageWidth / 2, y, { align: 'center' });

            y += 18;
            doc.setFontSize(32);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(44, 100, 227);
            doc.text(formatCurrency(calculatedResults.annualSavings), pageWidth / 2, y, { align: 'center' });

            y += 30;

            // Key metrics row
            const colWidth = (pageWidth - 40) / 3;

            doc.setFillColor(248, 249, 250);
            doc.roundedRect(20, y, colWidth - 5, 35, 2, 2, 'F');
            doc.roundedRect(20 + colWidth, y, colWidth - 5, 35, 2, 2, 'F');
            doc.roundedRect(20 + colWidth * 2, y, colWidth - 5, 35, 2, 2, 'F');

            y += 12;
            doc.setFontSize(9);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(107, 107, 112);
            doc.text('Per Funded Loan', 20 + (colWidth - 5) / 2, y, { align: 'center' });
            doc.text('Cost Reduction', 20 + colWidth + (colWidth - 5) / 2, y, { align: 'center' });
            doc.text('Funded Loans/Year', 20 + colWidth * 2 + (colWidth - 5) / 2, y, { align: 'center' });

            y += 12;
            doc.setFontSize(18);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(23, 23, 23);
            doc.text(formatCurrency(calculatedResults.savingsPerLoan), 20 + (colWidth - 5) / 2, y, { align: 'center' });
            doc.text(Math.round(calculatedResults.savingsPercent) + '%', 20 + colWidth + (colWidth - 5) / 2, y, { align: 'center' });
            doc.text(formatNumber(calculatedResults.fundedLoans), 20 + colWidth * 2 + (colWidth - 5) / 2, y, { align: 'center' });

            y += 30;

            // Cost comparison table
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(23, 23, 23);
            doc.text('Cost Comparison', 20, y);

            y += 10;

            // Table header
            doc.setFillColor(248, 249, 250);
            doc.rect(20, y, pageWidth - 40, 10, 'F');

            doc.setFontSize(9);
            doc.setFont('helvetica', 'bold');
            doc.setTextColor(107, 107, 112);
            doc.text('ITEM', 25, y + 7);
            doc.text('CURRENT STATE', 100, y + 7);
            doc.text('WITH TRUV', 160, y + 7);

            y += 15;

            // Table rows
            const tableData = [
                ['VOA Checks', formatCurrency(calculatedResults.currentVOACost), formatCurrency(calculatedResults.truvVOACost)],
                ['VOIE Checks', '—', formatCurrency(calculatedResults.truvVOIECost)],
                ['TWN Verifications', formatCurrency(calculatedResults.currentTWNCost), formatCurrency(calculatedResults.truvTWNCost)],
            ];

            doc.setFont('helvetica', 'normal');
            doc.setTextColor(23, 23, 23);

            tableData.forEach(row => {
                doc.setFontSize(10);
                doc.text(row[0], 25, y);
                doc.text(row[1], 100, y);
                doc.text(row[2], 160, y);
                y += 10;
            });

            // Total row
            doc.setFillColor(248, 249, 250);
            doc.rect(20, y - 5, pageWidth - 40, 12, 'F');
            doc.setFont('helvetica', 'bold');
            doc.text('Total Annual Cost', 25, y + 3);
            doc.text(formatCurrency(calculatedResults.totalCurrentCost), 100, y + 3);
            doc.text(formatCurrency(calculatedResults.totalTruvCost), 160, y + 3);

            y += 15;

            // Savings row
            doc.setFillColor(209, 250, 229);
            doc.rect(20, y - 5, pageWidth - 40, 12, 'F');
            doc.setTextColor(16, 185, 129);
            doc.text('Your Annual Savings', 25, y + 3);
            doc.text(formatCurrency(calculatedResults.annualSavings), 160, y + 3);

            y += 25;

            // Footer CTA
            doc.setFillColor(44, 100, 227);
            doc.roundedRect(20, y, pageWidth - 40, 30, 3, 3, 'F');

            doc.setTextColor(255, 255, 255);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('Ready to start saving?', pageWidth / 2, y + 12, { align: 'center' });
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.text('Contact us at truv.com/demo to schedule a personalized walkthrough', pageWidth / 2, y + 22, { align: 'center' });

            // Footer
            y = doc.internal.pageSize.getHeight() - 15;
            doc.setTextColor(107, 107, 112);
            doc.setFontSize(8);
            doc.text('© 2025 Truv. All rights reserved. | truv.com', pageWidth / 2, y, { align: 'center' });

            // Save the PDF
            doc.save(`Truv_ROI_Report_${leadData.company.replace(/\s+/g, '_')}.pdf`);
        }

        // Update quote based on industry
        function updateQuote(industry) {
            const quote = quotes[industry] || quotes.mortgage;
            document.querySelector('#quoteSection .quote-text').textContent = `"${quote.text}"`;
            document.querySelector('#quoteSection .quote-author').textContent = quote.author;
            document.querySelector('#quoteSection .quote-role').textContent = quote.role;
        }

        // Toggle collapsible panels
        function togglePanel(panelId) {
            document.getElementById(panelId).classList.toggle('open');
        }

        // Reset calculator
        function resetCalculator() {
            document.getElementById('simpleCalculator').style.display = 'block';
            document.getElementById('detailedResults').classList.remove('active');
            document.getElementById('leadForm').reset();
            document.getElementById('fundedLoans').value = 2000;
            document.getElementById('industry').value = 'mortgage';

            // Reset cost options
            selectCostOption('default');
            document.getElementById('input-perLoan').value = '';
            document.getElementById('input-totalSpend').value = '';
            document.getElementById('input-perVerification').value = '';

            updateSimpleCalculation();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Close modal on overlay click
        document.getElementById('gateModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeGateModal();
            }
        });

        document.getElementById('successModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSuccessModal();
            }
        });

        document.getElementById('scheduleModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeScheduleModal();
            }
        });

        // Close modal on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeGateModal();
                closeSuccessModal();
                closeScheduleModal();
            }
        });

        // Initialize
        updateSimpleCalculation();
    </script>
</body>
</html>
